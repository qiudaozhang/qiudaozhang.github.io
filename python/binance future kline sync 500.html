<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- <link href="https://cdn.bootcdn.net/ajax/libs/pure/3.0.0/base-context-min.css" rel="stylesheet"> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/a11y-light.min.css"
          integrity="sha512-WDk6RzwygsN9KecRHAfm9HTN87LQjqdygDmkHSJxVkVI7ErCZ8ZWxP6T8RvBujY1n2/E4Ac+bn2ChXnp5rnnHA=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.2.2/css/bootstrap-grid.css" rel="stylesheet">
    <link rel="stylesheet" href="../meta_css//domain.css">
    <title>binance future kline sync 500</title>
</head>
<body>
<div>
    <a href="https://qiudaozhang.github.io">首页</a>
</div>

<div class="row">
    <div class="col-sm-2 col-2">
        <!-- 左侧预留 -->
    </div>
    <div class="col-sm-8 col-8">
        <div>
            <h1>binance future kline sync 500</h1>

        </div>
        <div>
            <pre class="codehilite"><code class="language-python">import pandas as pd

from binance.um_futures import UMFutures
from db import sub_s, db

umf = UMFutures()

coins = sub_s.find()
i_list = ['15m', '1h', '4h', '1d']

for index, coin in coins.iterrows():
    s = coin['s']
    for i in i_list:
        data = umf.klines(symbol=s, interval=i)
        for d in data:
            t = int(d[0])
            o = d[1]
            h = d[2]
            l = d[3]
            c = d[4]
            v = d[5]
            q = d[7]
            sql = f&quot;replace into future_kline (s,i,t,o,c,h,l,v,q) value ('{s}','{i}',&quot; \
                  f&quot;{t},{o},{c},{h},{l},{v},{q}) &quot;
            db.execute(sql)
</code></pre>

        </div>
    </div>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"
        integrity="sha512-gU7kztaQEl7SHJyraPfZLQCNnrKdaQi5ndOyt4L4UPL/FHDd/uB9Je6KDARIqwnNNE27hnqoWLBq+Kpe4iHfeQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!-- 代码高亮 -->
<script>hljs.highlightAll();</script>
</body>
</html>